// @ts-nocheck
const bcrypt=require("bcryptjs"),jwt=require("jsonwebtoken"),Sport=require("../../models/Sport"),Match=require("../../models/Match"),fs=require("fs"),path=require("path"),axios=require("axios"),moment=require("moment-timezone"),mongoose=require("mongoose"),currentIST=moment().tz("Asia/Kolkata").toDate();exports.getAllSportNames=async(s,e)=>{try{const s=await Sport.find({},{displayName:1,icon:1,position:1}).sort({position:1});return e.status(200).json({message:"Sports fetched successfully",data:s})}catch(s){return console.error("Error fetching sports:",s.message),e.status(500).json({message:"Failed to fetch sports",error:s.message})}},exports.getInplayMatches=async(s,e)=>{try{const{sportName:t,sportId:r}=s.params,a={time:{$lte:currentIST}};if(t&&(a.sport_name=t),r&&(a.sportId=r),!mongoose.Types.ObjectId.isValid(r))return e.status(400).json({message:"Invalid sportId"});const o=await Match.find({sportId:r});e.status(200).json({message:"In-play matches fetched successfully",count:o.length,data:o})}catch(s){console.error("Error fetching in-play matches:",s),e.status(500).json({message:"Failed to fetch matches",error:s.message})}},exports.getInplayFancy=async(s,e)=>{try{const{sportName:t,sportId:r}=s.params,a={time:{$lte:currentIST}};if(t&&(a.sport_name=t),r&&(a.sportId=r),!mongoose.Types.ObjectId.isValid(r))return e.status(400).json({message:"Invalid sportId"});const o=await Match.find({sportId:r});e.status(200).json({message:"In-play matches fetched successfully",count:o.length,data:o})}catch(s){console.error("Error fetching in-play matches:",s),e.status(500).json({message:"Failed to fetch matches",error:s.message})}},exports.getInplayPremium=async(s,e)=>{try{const{sportName:t,sportId:r}=s.params,a={time:{$lte:currentIST}};if(t&&(a.sport_name=t),r&&(a.sportId=r),!mongoose.Types.ObjectId.isValid(r))return e.status(400).json({message:"Invalid sportId"});const o=await Match.find({sportId:r});e.status(200).json({message:"In-play matches fetched successfully",count:o.length,data:o})}catch(s){console.error("Error fetching in-play matches:",s),e.status(500).json({message:"Failed to fetch matches",error:s.message})}};