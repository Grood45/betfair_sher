// @ts-nocheck
const mongoose=require("mongoose"),sportSchema=new mongoose.Schema({sportId:{type:Number,unique:!0,required:!0},sportName:{type:String,required:!0},position:{type:Number,default:0},minBet:{type:Number,default:100},maxBet:{type:Number,default:5e5},betfairSportList:{type:mongoose.Schema.Types.Mixed,default:{}},sportradarSportList:{type:mongoose.Schema.Types.Mixed,default:{}},timestamp:{type:Date,default:Date.now},isBettingEnabled:{type:Boolean,default:!1},status:{type:Number,default:1}},{timestamps:!0});sportSchema.pre("validate",(async function(e){if(!this.sportId){let e,t=!0;for(;t;){e=Math.floor(1e5+9e5*Math.random());await mongoose.models.Sport.findOne({sportId:e})||(t=!1)}this.sportId=e}e()})),sportSchema.pre("save",(async function(e){if(this.isNew&&null==this.position){const e=await mongoose.models.Sport.findOne().sort("-position").select("position");this.position=e&&e.position?e.position+1:1}e()})),module.exports=mongoose.model("Sport",sportSchema);